[General]
network=WlanAndWpanCoexistenceTopology
outputvectormanager-class="omnetpp::envir::SqliteOutputVectorManager"
outputscalarmanager-class="omnetpp::envir::SqliteOutputScalarManager"

**.vector-recording = false

####### control traffic parametter in WLAN
**.wlanAP.wlan[*].address = "10:00:00:00:00:00"
**.wlan*.**.mgmt.accessPointAddress = "10:00:00:00:00:00"


################### common radio settings ###################
*.radioMedium.analogModel.typename = "DimensionalAnalogModel"
*.radioMedium.backgroundNoise.typename = "IsotropicDimensionalBackgroundNoise"
*.radioMedium.backgroundNoise.powerSpectralDensity = -113dBmWpMHz

*.*Host*.wlan[*].radio.separateReceptionParts = true
*.*Host*.wlan[*].radio.separateTransmissionParts = true

*.*Host*.wlan[*].radio.receiver.snirThresholdMode = "mean"
*.*Host*.wlan[*].radio.receiver.errorModel.snirMode = "mean"

################### WLAN radio settings  ##################
# 2452MHz/20MHz bw
*.wlan*.wlan[*].radio.typename = "Ieee80211DimensionalRadio"
*.wlan*.wlan[*].radio.channelNumber = 8
*.wlan*.wlan[*].opMode = "g(erp)"
*.wlan*.wlan[*].radio.transmitter.frequencyGains = "left c-b*1.5 -40dB linear c-b -28dB linear c-b*0.5-1MHz -20dB linear c-b*0.5+1MHz 0dB linear c+b*0.5-1MHz 0dB linear c+b*0.5+1MHz -20dB linear c+b -28dB linear c+b*1.5 -40dB right"
################### WPAN radio settings  ##################
# default channel config 2450MHz/2.8MHz bw
*.wpan*.wlan[0].typename = "Ieee802154NarrowbandInterface"
*.wpan*.wlan[0].radio.typename = "Ieee802154NarrowbandDimensionalRadio"
*.wpan*.wlan[0].radio.transmitter.frequencyGains = "left c-5MHz -40dB linear c-2MHz -20dB linear c-1MHz 0dB either c+1MHz 0dB linear c+2MHz -20dB linear c+5MHz -40dB right"

# ######## WLAN mac settings #########
*.wlan*.wlan[*].mac.dcf.originatorMacDataService.fragmentationPolicy.fragmentationThreshold = 2304B + 28B #TODO why is this necessary ?
*.wlan*.wlan[*].mac.dcf.rtsPolicy.rtsThreshold = (${wlanPacketLength} + 28 + 8 + 20) * 1B #value aligned with application length of payload #28 bytes is for DCF (header + trailer), 20B for IPv4 header, and 8B for UDP header

################### traffic model base #################
# WLAN
*.wlanHost*.numApps = 1
*.wlanHost*.app[*].typename = "UdpBasicApp"
*.wlanHost*.app[*].destAddresses = "wlanSink"
*.wlanHost*.app[*].destPort = 5000
*.wlanHost*.app[*].messageLength = ${wlanPacketLength =1500}byte # 2268
*.wlanHost*.app[*].packetName = "UDPData-wifi"
*.wlanHost*.app[*].startTime = 0s 
# WPAN
*.wpanHost*.numApps = 1
*.wpanHost*.app[0].typename = "UdpBasicApp"
*.wpanHost*.app[0].destAddresses = "wpanSink"
*.wpanHost*.app[0].destPort = 5000
*.wpanHost*.app[0].messageLength= ${wpanPacketLength = 88}byte
*.wpanHost*.app[0].packetName = "UDPData-wpan-"
*.wpanHost*.app[0].startTime = 0s

[Config CoexistenceBase]
sim-time-limit=15s 
repeat=2
*.nbrWlanTransmitters=${nbrWlanTrs = 1}
*.nbrWpanTransmitters=${nbrWpanTrs = 1}

*.wlan*.wlan[*].bitrate = ${wlanBitrate = 6}Mbps  
*.wpan*.wlan[0].radio.transmitter.bitrate = ${wpanBitrate = 250}kbps

#traffic rate parameters
*.wpanHost*.app[0].sendInterval = (${nbrWpanTrs} * ${wpanPacketLength}) * 8/ ${wpanBitrate} * 1ms 
*.wlanHost*.app[0].sendInterval = ((2 * ${nbrWlanTrs} * ${wlanPacketLength}) * 8/ ${wlanBitrate}) * (100/${wlanDutyCycle=60..100 step 10}) * 1us 

*.*Sink.numApps = 1
*.*Sink.app[0].typename = "UdpSink"
*.*Sink.app[0].localPort = 5000
